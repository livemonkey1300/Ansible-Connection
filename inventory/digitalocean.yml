plugin: community.digitalocean.digitalocean
api_token: "{{ lookup('community.hashi_vault.vault_kv2_get', 'digitalocean' , engine_mount_point='token').secret.token }}"
attributes:
  - id
  - name
  - tags
  - networks
keyed_groups:
  - key: do_tags | lower
    prefix: ""
    separator: ""
compose:
  ansible_host: do_networks.v4 | selectattr('type','eq','public') | map(attribute='ip_address') | first
